(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d03c4"],{"66b0":function(t,a,e){"use strict";e.r(a);var l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.isLoaded,expression:"!isLoaded"}],staticClass:"sc-wp wbs-main",class:{"wb-page-loaded":t.isLoaded},attrs:{id:"settingLog"}},[e("el-radio-group",{staticClass:"for-tab-nav",attrs:{size:t.$cnf.is_mobile?"medium":"small"},on:{change:function(a){return t.log_type(a)}},model:{value:t.type,callback:function(a){t.type=a},expression:"type"}},[e("el-radio-button",{attrs:{label:1}},[t._v("执行日志")]),e("el-radio-button",{attrs:{label:2}},[t._v("错误日志")])],1),e("div",{staticClass:"log-box mt"},[t.$cnf.is_mobile?e("div",{staticClass:"log-wp-run",attrs:{id:"running_log"}},[e("div",{staticClass:"cell-items"},t._l(t.run_log,(function(a,l){return e("div",{key:"log"+l,staticClass:"cell-item"},[e("div",{staticClass:"cell-bd"},[t._v(" "+t._s(a.msg)+" "),e("div",{staticClass:"log-time"},[e("span",{staticClass:"wk"},[t._v(t._s(a.type))]),e("span",{staticClass:"wk ml"},[t._v(t._s(a.time))])])])])})),0)]):e("el-table",{staticClass:"wbs-table",staticStyle:{width:"100%",height:"60vh"},attrs:{id:"running_log",data:t.run_log,"row-key":"id",height:"'100%'","empty-text":"- 最近7天无推送数据，建议保持每日更新内容 -"}},[e("el-table-column",{attrs:{label:"时间","class-name":"w20"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"data-label",attrs:{"data-label":"时间: "}},[t._v(" "+t._s(a.row.time)+" ")])]}}])}),e("el-table-column",{attrs:{label:"类型","class-name":"w20"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"url",attrs:{"data-label":"类型: "}},[t._v(t._s(a.row.type))])]}}])}),e("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"data-label",attrs:{"data-label":"详情: "}},[t._v(" "+t._s(a.row.msg)+" ")]),a.row.help?e("div",{staticClass:"data-label",attrs:{"data-label":"帮助: "},domProps:{innerHTML:t._s(a.row.help)}}):t._e()]}}])})],1),e("div",{staticClass:"pt-l pd-b"},[e("el-button",{attrs:{icon:"el-icon-delete-solid",plain:"",type:"danger",size:"mini"},on:{click:function(a){return t.clean_log()}}},[t._v("清除日志")]),e("el-button",{staticClass:"ml",attrs:{icon:"el-icon-refresh",plain:"",type:"primary",size:"mini"},on:{click:function(a){return t.getData()}}},[t._v("刷新日志")])],1)],1),e("wb-prompt",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}],staticClass:"mt"})],1)},s=[],o={name:"LogRun",data(){return{isLoaded:!1,run_log:[],type:1,loadmore:0,loading_data:-1}},created(){console.log("-- log-run -- created ---")},mounted(){console.log("-- log-run -- mounted ---");const t=this;t.getData()},methods:{log_type(t){const a=this;a.type=t,a.getData()},clean_log(){const t=this;t.$wbui.open({content:"确定清除所有所有日志?",btn:["确定","取消"],yes(){t.$api.saveData({_ajax_nonce:window._wb_bsl_ajax_nonce||"",action:t.$cnf.action.act,op:"clear_log",type:t.type}).then(a=>{t.$wbui.toast("已清除"),t.run_log=a,location.reload()})}})},getData(){const t=this;t.showLoading(),t.run_log=[],t.$api.fetchData({_ajax_nonce:window._wb_bsl_ajax_nonce||"",action:t.$cnf.action.act,op:"reload_log",type:t.type}).then(a=>{t.run_log=a,t.closeLoading(),setTimeout((function(){console.log("---run---");const a=t.$el.querySelector("#running_log .el-table__body-wrapper");a&&a.scrollTo(0,1e5),t.$wbui.toast("已加载最新日志")}),200),t.isLoaded=!0})},showLoading(){const t=this;t.$wbui.close(t.loading_data),t.loading_data=t.$wbui.loading()},closeLoading(){const t=this;t.$wbui.close(t.loading_data),t.loading_data=-1}}},n=o,i=e("2877"),c=Object(i["a"])(n,l,s,!1,null,null,null);a["default"]=c.exports}}]);