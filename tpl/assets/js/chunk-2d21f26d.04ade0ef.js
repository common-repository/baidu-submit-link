(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21f26d"],{d935:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"wbs-content"},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.isLoaded,expression:"!isLoaded"}],staticClass:"wbs-content-inner",class:{"wb-page-loaded":t.isLoaded}},[s("div",{staticClass:"wbs-main sc-wp"},[t.isLoaded?s("table",{staticClass:"wbs-form-table"},[s("tbody",[s("tr",[s("th",{staticClass:"row w8em"},[t._v(" 推送链接类型 "),s("div",{staticClass:"wbui-tooltip",attrs:{"data-msg":"不建议推送媒体、页面链接类型至百度"}},[s("svg",{staticClass:"wb-icon sico-qa"},[s("use",{attrs:{"xlink:href":"#sico-qa"}})])])]),s("td",{staticClass:"info"},[s("el-checkbox-group",{model:{value:t.opt.post_type,callback:function(a){t.$set(t.opt,"post_type",a)},expression:"opt.post_type"}},t._l(t.init_data.post_types,(function(a,e){return s("el-checkbox",{key:e,attrs:{label:e}},[t._v(t._s(a))])})),1)],1)]),s("tr",[s("th",[t._v(" 日志保留时间 "),s("div",{staticClass:"wbui-tooltip",attrs:{"data-msg":"网站文章数据较多，可以考虑较短日志保留时间。"}},[s("svg",{staticClass:"wb-icon sico-qa"},[s("use",{attrs:{"xlink:href":"#sico-qa"}})])])]),s("td",{staticClass:"info"},[s("el-radio-group",{model:{value:t.opt.log_day,callback:function(a){t.$set(t.opt,"log_day",a)},expression:"opt.log_day"}},t._l(t.init_data.log_day,(function(a,e){return s("el-radio",{key:e,attrs:{label:e}},[t._v(" "+t._s(a)+" ")])})),1)],1)]),s("tr",[s("th",[t._v("死链检测设置")]),s("td",[s("el-switch",{staticClass:"wb-switch",attrs:{type:"checkbox","active-value":"1","inactive-value":"0"},model:{value:t.opt.check_404,callback:function(a){t.$set(t.opt,"check_404",a)},expression:"opt.check_404"}}),s("span",{staticClass:"ml description"},[t._v(t._s(1==t.opt.check_404?"已开启":"已关闭"))]),s("div",{staticClass:"description mt"},[t._v(" * 死链检测依赖Spider Analyser-蜘蛛分析插件。 "),t.init_data.spider_install?t._e():s("div",{staticClass:"wb-hl wb-hl-inline"},[s("svg",{staticClass:"wb-icon wbsico-notice"},[s("use",{attrs:{"xlink:href":"#wbsico-notice"}})]),s("span",[t._v("未检测到Spider Analyser安装，去")]),s("a",{staticClass:"link",attrs:{href:t.init_data.spider_setup_url}},[t._v("安装")])]),t.init_data.spider_active?t._e():s("div",{staticClass:"wb-hl wb-hl-inline"},[s("svg",{staticClass:"wb-icon wbsico-notice"},[s("use",{attrs:{"xlink:href":"#wbsico-notice"}})]),s("span",[t._v("未检测到Spider Analyser启用，去")]),s("a",{staticClass:"link",attrs:{href:t.init_data.spider_setup_url}},[t._v("启用")])])]),s("div",{staticClass:"description mt"},[t._v(" * 对死链及时处理有利于网站权重，建议开启该功能。 ")])],1)]),s("tr",[s("th",[t._v("API推送选项")]),s("td",[s("label",[s("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:t.opt.old_post_push,callback:function(a){t.$set(t.opt,"old_post_push",a)},expression:"opt.old_post_push"}}),t._v(" 旧文章更新时间不占百度快速推送配额 ")],1),s("div",{staticClass:"mt"},[s("label",[s("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:t.opt.auto_check_in_baidu,callback:function(a){t.$set(t.opt,"auto_check_in_baidu",a)},expression:"opt.auto_check_in_baidu"}}),t._v(" 主动检测采集入库文章推送 ")],1)])])]),s("tr",[s("th",{staticClass:"row w8em"},[t._v(" 收录查询设置 ")]),s("td",[t._e(),s("div",[s("label",[s("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:t.opt.site_bing,callback:function(a){t.$set(t.opt,"site_bing",a)},expression:"opt.site_bing"}}),s("span",{staticClass:"ml"},[t._v(t._s(1==t.opt.site_bing?"已开启":"已关闭")+"必应收录查询")])],1)]),s("div",{staticClass:"description mt"},[s("dl",[t._e(),s("dd",[t._v(" * 必应收录查询，需要在：推送API->Bing推送，设置必应的API密钥。"),s("router-link",{attrs:{to:"setting-api"}},[t._v("去设置")])],1)])])])])])]):t._e()]),s("wb-prompt",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}],staticClass:"mt"}),t.$cnf.is_pro?t._e():s("wbs-more-sources")],1),s("wbs-ctrl-bar",{on:{submit:t.updateData}})],1)},i=[],o={name:"SettingBase",data(){const t=this;return{formChanged:1,isLoaded:!1,opt:t.$opt,init_data:{}}},created(){const t=this;t.getData()},methods:{getData(){const t=this;t.$api.getData({_ajax_nonce:window._wb_bsl_ajax_nonce||"",action:t.$cnf.action.act,op:"get_setting_cnf"}).then(a=>{t.init_data=a.data,t.$nextTick(()=>{t.formChanged=1}),t.isLoaded=!0})},updateData(t){const a=this;let s={};Object.assign(s,a.opt),s.btoa=0,window.btoa&&(s.btoa=1,s.byte_js&&(s.byte_js=window.btoa(s.byte_js)),s.google_key&&(s.google_key=window.btoa(s.google_key)),s.qhjs&&(s.qhjs=window.btoa(s.qhjs))),a.$api.saveData({_ajax_nonce:window._wb_bsl_ajax_nonce||"",action:a.$cnf.action.act,op:"update_setting",opt:s}).then(s=>{a.$wbui.toast("设置保存成功"),a.formChanged=1,t&&t()})}},watch:{opt:{handler(){this.formChanged++},deep:!0}},beforeRouteLeave(t,a,s){const e=this;e.formChanged>1?e.$wbui.open({content:"您修改的设置尚未保存，确定离开此页面吗？",btn:["保存并离开","放弃修改"],yes(){return s(!1),e.updateData((function(){s()})),!1},no(){return s(),!1}}):s()}},n=o,c=s("2877"),l=Object(c["a"])(n,e,i,!1,null,null,null);a["default"]=l.exports}}]);