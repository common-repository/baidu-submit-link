(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bce02"],{"2a30":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.isLoaded,expression:"!isLoaded"}],staticClass:"sc-wp wbs-main",class:{"wb-page-loaded":t.isLoaded}},[e("div",{staticClass:"log-box"},[e("div",{staticClass:"sc-body overview-with-charts stats-post-overview"},[e("div",{staticClass:"data-overview "},t._l(t.overview,(function(a){return e("div",{key:a.name,staticClass:"ao-it"},[e("dl",[e("dt",{staticClass:"it-name"},[t._v(t._s(a.name))]),e("dd",{staticClass:"it-value"},[t._v(" "+t._s(a.value)+" "),e("em",[t._v(t._s(a.unit))])])])])})),0),e("div",{staticClass:"wbs-ctrl-bar"},[e("el-select",{staticClass:"ctrl-item sm",attrs:{clearable:"",filterable:"",placeholder:"类型"},on:{change:function(a){return t.postCategory()}},model:{value:t.wb_taxonomy,callback:function(a){t.wb_taxonomy=a},expression:"wb_taxonomy"}},t._l(t.cnf.wb_taxonomies,(function(t,a){return e("el-option",{key:a,attrs:{label:t,value:a}})})),1),t.cat_list1.length>0?e("el-select",{staticClass:"ctrl-item sm",attrs:{clearable:"",filterable:"",placeholder:"一级分类"},on:{change:function(a){return t.categoryData(1)}},model:{value:t.cat1,callback:function(a){t.cat1=a},expression:"cat1"}},t._l(t.cat_list1,(function(t){return e("el-option",{key:t.term_id,attrs:{label:t.name,value:t.term_id}})})),1):t._e(),t.cat_list2.length>0?e("el-select",{staticClass:"ctrl-item sm",attrs:{clearable:"",filterable:"",placeholder:"二级分类"},on:{change:function(a){return t.categoryData(2)}},model:{value:t.cat2,callback:function(a){t.cat2=a},expression:"cat2"}},t._l(t.cat_list2,(function(t){return e("el-option",{key:t.term_id,attrs:{label:t.name,value:t.term_id}})})),1):t._e()],1),e("v-chart",{ref:"chart_obj",staticClass:"charts-box mt",attrs:{options:t.chart_cnf}})],1),e("el-radio-group",{staticClass:"for-tab-nav",attrs:{size:t.$cnf.is_mobile?"medium":"small"},on:{change:function(a){return t.switch_log_baidu(a)}},model:{value:t.type,callback:function(a){t.type=a},expression:"type"}},[e("el-radio-button",{attrs:{label:1}},[t._v("所有文章")]),e("el-radio-button",{attrs:{label:2}},[t._v("已收录文章")]),e("el-radio-button",{attrs:{label:3}},[t._v("未收录文章")])],1),t.$cnf.is_mobile?e("div",{staticClass:"cell-items mt"},[t.log_baidu.length?t._e():e("div",{staticClass:"empty-data align-center"},[t._v(" --暂无数据-- ")]),t._l(t.log_baidu,(function(a,i){return e("div",{key:"item"+i,staticClass:"cell-item with-expand"},[e("div",{staticClass:"cell-hd"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.multipleSelection,expression:"multipleSelection"}],attrs:{type:"checkbox"},domProps:{value:a,checked:Array.isArray(t.multipleSelection)?t._i(t.multipleSelection,a)>-1:t.multipleSelection},on:{change:function(e){var i=t.multipleSelection,s=e.target,o=!!s.checked;if(Array.isArray(i)){var l=a,n=t._i(i,l);s.checked?n<0&&(t.multipleSelection=i.concat([l])):n>-1&&(t.multipleSelection=i.slice(0,n).concat(i.slice(n+1)))}else t.multipleSelection=o}}})]),e("div",{staticClass:"cell-bd primary"},[e("a",{attrs:{href:a.post_url,target:"_blank"}},[t._v(" "+t._s(a.post_title)+" ")]),e("div",{staticClass:"def-hide"},[e("div",{staticClass:"data-label",attrs:{"data-label":"状态: "},domProps:{innerHTML:t._s(t.outStatus(a))}}),e("div",{staticClass:"data-label",attrs:{"data-label":"发布日期: "}},[t._v(" "+t._s(a.post_date)+" ")]),e("div",{staticClass:"data-label",attrs:{"data-label":"最近检测: "}},[t._v(" "+t._s(a.in_baidu?a.last_date:"-")+" ")]),e("div",{staticClass:"btns"},[e("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-s-flag",title:"标记收录"},on:{click:function(e){return t.mark_baidu(a)}}},[t._v("标记")]),e("el-button",{attrs:{plain:"",size:"mini",type:"success",icon:"el-icon-s-check",title:"检测收录"},on:{click:function(e){return t.check_baidu(a)}}},[t._v("检测")]),e("el-button",{attrs:{size:"mini",type:"info",plain:"",icon:"el-icon-tickets",title:"蛛蛛日志"},on:{click:function(e){return t.spider_history(a)}}},[t._v("日志")])],1)])]),e("div",{staticClass:"cell-ft",on:{click:t.$WB.toggleActive}})])}))],2):e("el-table",{staticClass:"wbs-table mt table-with-selection",staticStyle:{width:"100%"},attrs:{data:t.log_baidu},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",selectable:t.chk_selectable,width:"35"}}),e("el-table-column",{attrs:{label:"标题/URL","class-name":"w35"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"url"},[e("a",{attrs:{"data-label":"URL: ",href:a.row.post_url,target:"_blank"}},[e("span",[t._v(t._s(a.row.post_title))])])])]}}])}),e("el-table-column",{attrs:{label:"发布日期","class-name":"w15"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"data-label",attrs:{"data-label":"发布日期: "}},[t._v(" "+t._s(a.row.post_date)+" ")])]}}])}),e("el-table-column",{attrs:{label:"收录状态","class-name":"w10"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"data-label",attrs:{"data-label":"状态: "},domProps:{innerHTML:t._s(t.outStatus(a.row))}})]}}])},[e("template",{slot:"header"},[e("span",{staticClass:"ib"},[t._v("收录状态")]),e("el-tooltip",{staticClass:"wbui-tooltip",attrs:{placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("dl",[e("dd",[t._v("已强推：即对该文章执行了强推至百度操作。")]),e("dd",[t._v(" 未标记：即未手动检查文章收录状态对文章的收录状态进行标记。 ")]),e("dd",[t._v(" 未收录：长时间未收录文章建议对文章内容进行整改再次发布。部分已收录但显示未收录，需等待数据更新。 ")]),e("dd",[t._v(" 已收录：已收录但实际未收录，可能因为收录后被百度剔除。此种情况建议删除或者对内容整改。 ")])])]),e("div",{staticClass:"wbui-tooltip"},[e("svg",{staticClass:"wb-icon sico-qa"},[e("use",{attrs:{"xlink:href":"#sico-qa"}})])])])],1)],2),e("el-table-column",{attrs:{label:"操作",align:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"btns"},[a.row.in_baidu&&1==a.row.in_baidu?t._e():e("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-s-flag",title:"标记收录"},on:{click:function(e){return t.mark_baidu(a.row)}}},[t._v("标记")]),e("el-button",{attrs:{plain:"",size:"mini",type:"success",icon:"el-icon-s-check",title:"检测收录"},on:{click:function(e){return t.check_baidu(a.row)}}},[t._v("检测")]),e("el-button",{attrs:{size:"mini",type:"info",plain:"",icon:"el-icon-tickets",title:"蛛蛛日志"},on:{click:function(e){return t.spider_history(a.row)}}},[t._v("日志")]),a.row.in_baidu&&1==a.row.in_baidu?t._e():e("el-button",{attrs:{size:"mini",type:"info",plain:"",icon:"el-icon-tickets",title:"强推百度"},on:{click:function(e){return t.push_baidu(a.row)}}},[t._v("强推")])],1)]}}])},[e("template",{slot:"header"},[e("span",{staticClass:"ib"},[t._v("操作")]),e("el-tooltip",{staticClass:"wbui-tooltip",attrs:{placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("dl",[e("dd",[e("i",{staticClass:"el-icon-s-flag"}),t._v(" 标记：手动标记实际已收录但插件检测未收录文章。 ")]),e("dd",[e("i",{staticClass:"el-icon-s-check"}),t._v(" 检测：用于手动检测查看文章是否被收录。URL检测未收录不完全代表未收录，可使用标题检测法进一步核实。 ")]),e("dd",[e("i",{staticClass:"el-icon-tickets"}),t._v(" 日志：查看当前文章最近被搜索引擎蜘蛛爬取的日志记录。 ")]),e("dd",[e("i",{staticClass:"el-icon-s-promotion"}),t._v(" 强推：强制将链接推送至百度。建议对文章进行整改后操作此项。 ")])])]),e("div",{staticClass:"wbui-tooltip"},[e("svg",{staticClass:"wb-icon sico-qa"},[e("use",{attrs:{"xlink:href":"#sico-qa"}})])])])],1)],2)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.log_baidu.length>0,expression:"log_baidu.length > 0"}],staticClass:"btns-bar with-ctrl-area"},[e("div",{staticClass:"wb-ctrl-area"},[e("el-select",{attrs:{size:"small",placeholder:"批量操作"},model:{value:t.batch_op,callback:function(a){t.batch_op=a},expression:"batch_op"}},[e("el-option",{attrs:{label:"标记收录",value:"mark"}}),e("el-option",{attrs:{label:"强推百度",value:"force"}})],1),e("el-button",{staticClass:"ml-s",attrs:{type:"info",plain:"",size:"small"},on:{click:t.batch_apply}},[t._v("应用")])],1),e("el-pagination",{attrs:{background:"",small:!!t.$cnf.is_mobile,layout:t.$cnf.is_mobile?"pager, total, prev, next":"total, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":t.num,total:1*t.total,"pager-count":5},on:{"size-change":t.handleSizeChange,"current-change":t.nav_page}})],1),t.is_pro?t._e():e("div",{staticClass:"getpro-mask"},[e("div",{staticClass:"mask-inner"},[e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.getPro}},[t._v("获取PRO版本")]),e("p",{staticClass:"tips"},[t._v("* 注意：当前为随机演示数据，仅供参考")])],1)])],1),e("wb-prompt",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}],staticClass:"mt"})],1)},s=[],o=e("67fc"),l=e.n(o);const n="WB_BSL_USER_OPT_"+window.uid;var c={name:"StatsPosts",components:{"v-chart":l.a},data(){const t=this;return{isLoaded:!1,day:30,cat1:"",cat2:"",cat_list1:[],cat_list2:[],wb_taxonomy:"category",overview:[{name:"全站收录",value:0,unit:""},{name:"文章收录",value:0,unit:""},{name:"未收录文章",value:0,unit:""},{name:"文章收录占比",value:0,unit:"%"}],chart_cnf:{},is_pro:t.$cnf.is_pro,cnf:t.$cnf,opt:t.$opt,type:1,check_all:"",last_check_date:"",query_times:"",log_baidu:[],loadmore:0,loading_data:-1,list:[],num:10,page:1,total:0,log_items:{1:{total:0,page:1,list:[]},2:{total:0,page:1,list:[]},3:{total:0,page:1,list:[]}},multipleSelection:[],batch_op:""}},created(){console.log("-- idx -- created ---")},mounted(){console.log("-- idx -- mounted ---");const t=this,a=t.$WB.getLocalStorage(n)||{};t.num=a.PAGE_SIZE||10,t.categoryData(0),t.is_pro?(t.switch_log_baidu(1),t.loadData(),t.load_overview_data()):t.isLoaded=!0},methods:{chk_selectable(t,a){return!(1==t.in_baidu)},mark_baidu(t){const a=this;a.$wbui.confirm("确定标记收录？",()=>{a.$api.saveData({_ajax_nonce:window._wb_bsl_ajax_nonce||"",action:a.$cnf.action.act,op:"mark",post_id:[t.post_id]}).then(t=>{a.$wbui.toast("操作成功"),a.loadData()})})},push_baidu(t){const a=this;a.$wbui.confirm("确定强推百度？",()=>{a.$api.saveData({_ajax_nonce:window._wb_bsl_ajax_nonce||"",action:a.$cnf.action.act,op:"force",post_id:[t.post_id]}).then(t=>{t.code?a.$wbui.toast("操作失败,可查看推送日志"):(a.$wbui.toast("操作成功"),a.loadData())})})},handleSelectionChange(t){this.multipleSelection=t},batch_apply(){const t=this;if(!t.batch_op)return!1;if(t.multipleSelection.length<1)return t.$wbui.toast("未选择项目"),!1;if("mark"==t.batch_op){let a=[];if(t.multipleSelection.forEach(t=>{a.push(t.post_id)}),a.length<1)return;t.$wbui.confirm("确定标记收录？",()=>{t.$api.saveData({_ajax_nonce:window._wb_bsl_ajax_nonce||"",action:t.$cnf.action.act,op:"mark",post_id:a}).then(a=>{t.$wbui.toast("操作成功"),t.loadData()})})}else if("force"==t.batch_op){let a=[];if(t.multipleSelection.forEach(t=>{a.push(t.post_id)}),a.length<1)return;t.$wbui.confirm("确定强推百度？",()=>{t.$api.saveData({_ajax_nonce:window._wb_bsl_ajax_nonce||"",action:t.$cnf.action.act,op:"force",post_id:a}).then(a=>{a.code?t.$wbui.toast("操作失败,可查看推送日志"):(t.$wbui.toast("操作成功"),t.loadData())})})}return!1},load_overview_data(){const t=this;t.$api.getData({_ajax_nonce:window._wb_bsl_ajax_nonce||"",action:t.$cnf.action.act,op:"post_overview"}).then(a=>{const e=a.data;for(let i=0;i<e.length;i++)t.overview[i].value=e[i]})},categoryChart(t){const a=this,e=a.$cnf.is_mobile;a.chart_cnf=JSON.parse(JSON.stringify(a.$echart_cnf)),a.chart_cnf.xAxis.boundaryGap=!0,a.chart_cnf.xAxis.data=t.x,a.chart_cnf.grid={show:!0,left:20,containLabel:!0,top:10,right:10,bottom:20,borderColor:"rgba(255,255,255,0)"},e||(a.chart_cnf.xAxis.axisLabel={interval:0}),(t.x.length>20||e)&&(a.chart_cnf.xAxis.axisLabel.rotate=30,a.chart_cnf.dataZoom=[{type:"slider",show:!0,realtime:!0,start:0,end:50},{show:!1}]),a.chart_cnf.series=[{data:t.y,type:"bar",barGap:30,showBackground:!0,barMaxWidth:e?"5":"10",backgroundStyle:{color:"rgba(220, 220, 220, 0.1)"}}]},categoryData(t){const a=this;if(!this.is_pro)return void a.categoryChart({x:["分类A","分类B","分类C","分类D"],y:["150","135","180","149"]});a.$refs.chart_obj.showLoading({text:"加载中...",color:"#06c",textColor:"#333",maskColor:"rgba(255, 255, 255, .8)",zlevel:0});let e=0;1==t?(a.cat_list2=[],a.cat2="",e=a.cat1,console.log(e),e<1&&(t=0,a.cat2="",a.cat_list1=[],a.cat_list2=[]),a.categoryChart({x:[],y:[]})):2==t?(e=a.cat2,console.log(e),e<1&&(t=1,e=a.cat1,a.cat_list2=[]),a.categoryChart({x:[],y:[]})):(a.cat1="",a.cat2="",a.cat_list1=[],a.cat_list2=[],a.categoryChart({x:[],y:[]})),a.$api.getData({_ajax_nonce:window._wb_bsl_ajax_nonce||"",action:a.$cnf.action.act,op:"post_category",taxonomy:a.wb_taxonomy,pid:e}).then(e=>{const i=e.data;1==t?(a.categoryChart(i),a.cat_list2=e["cat_list2"]):2==t?a.categoryChart(i):(a.categoryChart(i),a.cat_list1=e["cat_list1"],a.cat_list2=e["cat_list2"]),a.$refs.chart_obj&&a.$refs.chart_obj.hideLoading()})},postCategory(){const t=this;console.log(t.wb_taxonomy),t.categoryData(0)},getPro(){this.$router.push({path:"/pro"})},showLoading(){const t=this;t.$wbui.close(t.loading_data),t.loading_data=t.$wbui.loading()},closeLoading(){const t=this;t.$wbui.close(t.loading_data),t.loading_data=-1},switch_log_baidu(t){const a=this;let e=a.log_items[t]["list"]||[];return 0==e.length?(a.page=a.log_items[t]["page"]=1,a.total=a.log_items[t]["total"]=0,a.loadData()):(a.log_baidu=e,a.page=a.log_items[t]["page"],a.total=a.log_items[t]["total"]),!1},loadData(t){const a=this;let e=t||a.num;if(!a.is_pro)return a.isLoaded=!0,[];a.showLoading(),a.$api.getData({_ajax_nonce:window._wb_bsl_ajax_nonce||"",action:a.$cnf.action.act,op:"baidu_log",num:e,page:a.page,type:a.type}).then(t=>{t.data&&(a.log_baidu=t.data),a.total=a.log_items[a.type]["total"]=t.total,a.page=a.log_items[a.type]["page"]=a.page,a.log_items[a.type]["list"]=t.data,a.closeLoading(),a.isLoaded=!0}).catch(()=>{a.closeLoading(),a.isLoaded=!0})},spider_history(t){const a=this,e=a.$el.querySelector("#not_found_spider");e&&e.dataset.status?a.$wbui.open({title:"蜘蛛日志",className:"wbui-logs",content:e.innerHTML}):a.$api.getData({_ajax_nonce:window._wb_bsl_ajax_nonce||"",action:a.$cnf.action.act,op:"spider_history",post_id:t.post_id}).then(t=>{a.$wbui.open({title:"蜘蛛日志",className:"wbui-logs",content:t})})},check_baidu(t){window.open("https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&ch=&tn=baiduerr&bar=&wd="+encodeURIComponent(t.post_url))},check_all_post(){const t=this;t.$api.saveData({_ajax_nonce:window._wb_bsl_ajax_nonce||"",action:t.$cnf.action.act,op:"check_all_post"}).then(a=>{t.check_all=1,t.$wbui.toast("检测任务提交成功")})},nav_page(t){const a=this;if(!a.is_pro)return[];a.page=t,a.loadData()},handleSizeChange(t){let a=e.$WB.getLocalStorage(n)||{};const e=this;e.num=t,e.page=1,a["PAGE_SIZE"]=t,e.$WB.setLocalStorage(n,a),sessionStorage.clear(),e.loadData()},outStatus(t){let a="";if(t&&t.in_baidu){const e={1:'<span class="wb-status-tag success">已收录</span>',2:'<span class="wb-status-tag">未收录</span>',3:'<span class="wb-status-tag">已强推</span>'};a=e[t.in_baidu]}else a='<span class="wb-status-tag new">未标记</span>';return a}}},r=c,_=e("2877"),d=Object(_["a"])(r,i,s,!1,null,null,null);a["default"]=d.exports}}]);